{% extends "_base.html" %}

{% block style %}
<style>
    table tr th {
        padding: 6px;
    }

    table tr td {
        padding: 3px;
    }

    .separator:not(:first-of-type) td {
        border-top: 1px solid var(--base-border-color);
    }
</style>
{% endblock %}

{% macro create_page(table_data, header, page, loop) %}
<div class="page">
    <div class="content">
        <div>
            <div class="mb-xxl">
                <div class="header">
                    <h1 class="mb-xs">DATASET CENTRO DI SELEZIONE</h1>
                    <p>Allegato {{ header }}</p>
                </div>
            </div>

            <!-- Page Content -->
            <h2 class="mb-xl">Applicazione delle nuove tavole di conversione</h2>
            <div class="mb-xxl">
                <table class="table-bordered table-striped full-width">
                    <thead>
                        <tr>
                            <th class="text-center">Prova sportiva</th>
                            <th class="text-center">Concorso</th>
                            <th class="text-center">Anno</th>
                            <th class="text-center">Genere</th>
                            <th class="text-center">F1</th>
                            <th class="text-center">F2</th>
                            <th class="text-center">F3</th>
                            <th class="text-center">F4</th>
                            <th class="text-center">F5</th>
                            <th class="text-center">F6</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set test = namespace(name="") %}
                        {% for _, row in table_data.iterrows() %}
                            <tr class="{% if test.name != row.test %}separator{% endif %}">
                                {% set test.name = row.test %}
                                <td class="text-center">{{ get_test_label(row.test) }}</td>
                                <td class="text-center">{{ row.recruitment_type }}</td>
                                <td class="text-center">{{ row.recruitment_year }}</td>
                                <td class="text-center">{{ row.gender | upper }}</td>
                                <td class="text-center">{{ row.step1 }}</td>
                                <td class="text-center">{{ row.step2 }}</td>
                                <td class="text-center">{{ row.step3 }}</td>
                                <td class="text-center">{{ row.step4 }}</td>
                                <td class="text-center">{{ row.step5 }}</td>
                                <td class="text-center">{{ row.step6 }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="10">
                                <div class="caption">
                                    <span>Tabella {{ header }}.{{loop.index0+1}}:</span>
                                    <span>
                                        Il dataset analizzato Ã¨ quello originale, fornito dal Centro di Selezione. F1 = Prima fascia di punteggio standardizzato, F2 = Seconda fascia di punteggio standardizzato, F3 = Terza fascia di punteggio standardizzato, F4 = Quarta fascia di punteggio standardizzato, F5 = Quinta fascia di punteggio standardizzato, F6 = Sesta fascia di punteggio standardizzato.
                                    </span>
                                </div>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
        <div class="footer">{{ page + loop.index0 }}</div>
    </div>
</div>
{% endmacro %}

{% block body %}
    {% for table_data in tables_data %}
        {{ create_page(table_data, header, page, loop) }}
    {% endfor %}
{% endblock %}